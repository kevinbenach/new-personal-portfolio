---
import { Image } from 'astro:assets';
import ProjectsText from '@/components/islands/ProjectsText.tsx';
import { featuredProjects } from '@/data/projects';

// Import all project images
import goagainImage from '@/assets/images/projects/goagain-preview.avif';
import issuesViewerImage from '@/assets/images/projects/issues-viewer-preview.avif';
import portfolioImage from '@/assets/images/projects/portfolio-preview.avif';

// Map image filenames to imported modules
const imageMap: Record<string, any> = {
  'goagain-preview.avif': goagainImage,
  'issues-viewer-preview.avif': issuesViewerImage,
  'portfolio-preview.avif': portfolioImage,
};

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<section id="projects" class={`py-20 bg-white dark:bg-gray-900 ${className}`}>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto">

      <!-- Projects Text Island - automatically updates with language changes -->
      <ProjectsText client:only="preact" projects={featuredProjects} imageMap={imageMap} />

    </div>
  </div>
</section>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .project-card {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>